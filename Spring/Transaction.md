# 거래

> DB의 상태를 변화시키기 위해 수행하는 작업의 최소 단위이다.

---

1. 이해

   DB의 상태를 변화시키는 것은 다음 query를 수행하는 것이다.

   1. `SELECT`

   2. `INSERT`

   3. `UPDATE`

   4. `DELETE`

   그렇다고 하여 transaction이 query문 하나를 의미하지는 않는다. 예를 들어 게시판에 글을 쓰는 것은 다음 query를 수행하는 것이다.

   ```sql
   INSERT INTO board (title, context, writer) VALUES ('제목', '내용', '작성자');
   SELECT * FROM board;
   ```

   이와 같이 `INSERT`를 통해 게시물을 추가하고, `SELECT`를 통해 최신 게시물을 조회하는 것을 하나의 transaction으로 친다. 이처럼 한 번에 수행되어야만 하는 처리를 모은 것이 transaction이다.

   만약 두 query 중 게시물을 추가하는 것만 수행되고, 최신 게시물을 조회하는 것은 수행되지 않는다면 추가한 게시물이 조회되지 않는다면 문제가 생긴다. 반대로 최신 게시물을 조회하는 것만 수행되고, 게시물을 추가하는 것은 수행되지 않는 것 역시 문제이다.

   두 query를 한 transaction으로 묶어서 **모두 제대로 수행되었을 때만 결과를 반영**하고, **하나라도 실패하면 모든 작업을 취소하고 원상복구**하도록 한다. 이를 통해 data의 안정성을 보장한다.

2. 특징

---
